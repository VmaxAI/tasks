diff --git a/lib/request.js b/lib/request.js
index be802f5..4f0f4e5 100644
--- a/lib/request.js
+++ b/lib/request.js
@@ -703,13 +703,52 @@ module.exports = {
    * @api public
    */
 
-  toJSON () {
-    return only(this, [
-      'method',
-      'url',
-      'header'
-    ])
-  }
+ def count_inversions(arr):
+     """
+     Count the number of inversions in the array.
+     An inversion is a pair of indices (i, j) such that i < j and arr[i] > arr[j].
+    
+     Uses merge sort approach for O(n log n) time complexity.
+    
+     Args:
+         arr: List of comparable elements
+        
+     Returns:
+         int: Number of inversions
+     """
+     if len(arr) <= 1:
+         return 0
+    
+     def merge_count_inversions(arr):
+         """Helper function that sorts array and counts inversions"""
+         if len(arr) <= 1:
+             return arr, 0
+        
+         mid = len(arr) // 2
+         left, left_inv = merge_count_inversions(arr[:mid])
+         right, right_inv = merge_count_inversions(arr[mid:])
+        
+         merged = []
+         inversions = left_inv + right_inv
+         i = j = 0
+        
+         while i < len(left) and j < len(right):
+             if left[i] <= right[j]:
+                 merged.append(left[i])
+                 i += 1
+             else:
+                 merged.append(right[j])
+                 # All remaining elements in left are greater than right[j]
+                 inversions += len(left) - i
+                 j += 1
+        
+         merged.extend(left[i:])
+         merged.extend(right[j:])
+        
+         return merged, inversions
+    
+     _, total_inversions = merge_count_inversions(arr)
+     return total_inversions
 }
 
 /**
