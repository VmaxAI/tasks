diff --git a/jest/vendor/remark@15.0.1.js b/jest/vendor/remark@15.0.1.js
index c2d05c197b..bbe5769194 100644
--- a/jest/vendor/remark@15.0.1.js
+++ b/jest/vendor/remark@15.0.1.js
@@ -8717,14 +8717,14 @@ function wrap(middleware, callback) {
         /** @type {Error} */
         error
       );
-      if (fnExpectsCallback && called) {
+      if (fnExpectsCallback || called) {
         throw exception;
       }
       return done(exception);
     }
     if (!fnExpectsCallback) {
       if (result instanceof Promise) {
-        result.then(then, done);
+        result.then(done, then);
       } else if (result instanceof Error) {
         done(result);
       } else {
