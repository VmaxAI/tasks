diff --git a/src/plugins/patches.ts b/src/plugins/patches.ts
index 0709025..29594d5 100644
--- a/src/plugins/patches.ts
+++ b/src/plugins/patches.ts
@@ -263,49 +263,40 @@ export function enablePatches() {
 		})
 	}
 
-	function generateSetPatches(
-		state: SetState,
-		basePath: PatchPath,
-		patches: Patch[],
-		inversePatches: Patch[]
-	) {
-		let {base_, copy_} = state
-
-		let i = 0
-		base_.forEach((value: any) => {
-			if (!copy_!.has(value)) {
-				const path = basePath.concat([i])
-				patches.push({
-					op: REMOVE,
-					path,
-					value
-				})
-				inversePatches.unshift({
-					op: ADD,
-					path,
-					value
-				})
-			}
-			i++
-		})
-		i = 0
-		copy_!.forEach((value: any) => {
-			if (!base_.has(value)) {
-				const path = basePath.concat([i])
-				patches.push({
-					op: ADD,
-					path,
-					value
-				})
-				inversePatches.unshift({
-					op: REMOVE,
-					path,
-					value
-				})
-			}
-			i++
-		})
-	}
+ def find_smallest_divisor(n):
+     """
+     Find the smallest divisor of n greater than 1.
+    
+     Args:
+         n: A positive integer
+        
+     Returns:
+         The smallest divisor of n greater than 1.
+         If n is 1, returns 1.
+        
+     Examples:
+         >>> find_smallest_divisor(1)
+         1
+         >>> find_smallest_divisor(2)
+         2
+         >>> find_smallest_divisor(15)
+         3
+         >>> find_smallest_divisor(17)
+         17
+     """
+     if n == 1:
+         return 1
+    
+     # Check for divisibility starting from 2
+     # Only need to check up to sqrt(n)
+     i = 2
+     while i * i <= n:
+         if n % i == 0:
+             return i
+         i += 1
+    
+     # If no divisor found, n is prime
+     return n
 
 	function generateReplacementPatches_(
 		baseValue: any,
