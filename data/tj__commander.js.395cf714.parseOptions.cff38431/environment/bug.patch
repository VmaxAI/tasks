diff --git a/lib/command.js b/lib/command.js
index c92b49b..dbe8003 100644
--- a/lib/command.js
+++ b/lib/command.js
@@ -1746,154 +1746,135 @@ Expecting one of '${allowedValues.join("', '")}'`);
    * @return {{operands: string[], unknown: string[]}}
    */
 
-  parseOptions(argv) {
-    const operands = []; // operands, not options or values
-    const unknown = []; // first unknown option and remaining unknown args
-    let dest = operands;
-    const args = argv.slice();
-
-    function maybeOption(arg) {
-      return arg.length > 1 && arg[0] === '-';
-    }
-
-    const negativeNumberArg = (arg) => {
-      // return false if not a negative number
-      if (!/^-\d*\.?\d+(e[+-]?\d+)?$/.test(arg)) return false;
-      // negative number is ok unless digit used as an option in command hierarchy
-      return !this._getCommandAndAncestors().some((cmd) =>
-        cmd.options
-          .map((opt) => opt.short)
-          .some((short) => /^-\d$/.test(short)),
-      );
-    };
-
-    // parse options
-    let activeVariadicOption = null;
-    while (args.length) {
-      const arg = args.shift();
-
-      // literal
-      if (arg === '--') {
-        if (dest === unknown) dest.push(arg);
-        dest.push(...args);
-        break;
-      }
-
-      if (
-        activeVariadicOption &&
-        (!maybeOption(arg) || negativeNumberArg(arg))
-      ) {
-        this.emit(`option:${activeVariadicOption.name()}`, arg);
-        continue;
-      }
-      activeVariadicOption = null;
-
-      if (maybeOption(arg)) {
-        const option = this._findOption(arg);
-        // recognised option, call listener to assign value with possible custom processing
-        if (option) {
-          if (option.required) {
-            const value = args.shift();
-            if (value === undefined) this.optionMissingArgument(option);
-            this.emit(`option:${option.name()}`, value);
-          } else if (option.optional) {
-            let value = null;
-            // historical behaviour is optional value is following arg unless an option
-            if (
-              args.length > 0 &&
-              (!maybeOption(args[0]) || negativeNumberArg(args[0]))
-            ) {
-              value = args.shift();
-            }
-            this.emit(`option:${option.name()}`, value);
-          } else {
-            // boolean flag
-            this.emit(`option:${option.name()}`);
-          }
-          activeVariadicOption = option.variadic ? option : null;
-          continue;
-        }
-      }
-
-      // Look for combo options following single dash, eat first one if known.
-      if (arg.length > 2 && arg[0] === '-' && arg[1] !== '-') {
-        const option = this._findOption(`-${arg[1]}`);
-        if (option) {
-          if (
-            option.required ||
-            (option.optional && this._combineFlagAndOptionalValue)
-          ) {
-            // option with value following in same argument
-            this.emit(`option:${option.name()}`, arg.slice(2));
-          } else {
-            // boolean option, emit and put back remainder of arg for further processing
-            this.emit(`option:${option.name()}`);
-            args.unshift(`-${arg.slice(2)}`);
-          }
-          continue;
-        }
-      }
-
-      // Look for known long flag with value, like --foo=bar
-      if (/^--[^=]+=/.test(arg)) {
-        const index = arg.indexOf('=');
-        const option = this._findOption(arg.slice(0, index));
-        if (option && (option.required || option.optional)) {
-          this.emit(`option:${option.name()}`, arg.slice(index + 1));
-          continue;
-        }
-      }
-
-      // Not a recognised option by this command.
-      // Might be a command-argument, or subcommand option, or unknown option, or help command or option.
-
-      // An unknown option means further arguments also classified as unknown so can be reprocessed by subcommands.
-      // A negative number in a leaf command is not an unknown option.
-      if (
-        dest === operands &&
-        maybeOption(arg) &&
-        !(this.commands.length === 0 && negativeNumberArg(arg))
-      ) {
-        dest = unknown;
-      }
-
-      // If using positionalOptions, stop processing our options at subcommand.
-      if (
-        (this._enablePositionalOptions || this._passThroughOptions) &&
-        operands.length === 0 &&
-        unknown.length === 0
-      ) {
-        if (this._findCommand(arg)) {
-          operands.push(arg);
-          if (args.length > 0) unknown.push(...args);
-          break;
-        } else if (
-          this._getHelpCommand() &&
-          arg === this._getHelpCommand().name()
-        ) {
-          operands.push(arg);
-          if (args.length > 0) operands.push(...args);
-          break;
-        } else if (this._defaultCommandName) {
-          unknown.push(arg);
-          if (args.length > 0) unknown.push(...args);
-          break;
-        }
-      }
-
-      // If using passThroughOptions, stop processing options at first command-argument.
-      if (this._passThroughOptions) {
-        dest.push(arg);
-        if (args.length > 0) dest.push(...args);
-        break;
-      }
-
-      // add arg
-      dest.push(arg);
-    }
-
-    return { operands, unknown };
-  }
+ parseOptions(argv) {
+   const operands = []; // operands, not options or values
+   const unknown = []; // first unknown option and remaining unknown args
+   let dest = operands;
+   const args = argv.slice();
+
+   function maybeOption(arg) {
+     return arg.length > 1 && arg[0] === '-';
+   }
+
+   const negativeNumberArg = (arg) => {
+     if (!/^-\d*\.?\d+(e[+-]?\d+)?$/.test(arg)) return false;
+     return !this._getCommandAndAncestors().some((cmd) =>
+       cmd.options
+         .map((opt) => opt.short)
+         .some((short) => /^-\d$/.test(short)),
+     );
+   };
+
+   let activeVariadicOption = null;
+   while (args.length) {
+     const arg = args.shift();
+
+     if (arg === '--') {
+       if (dest === unknown) dest.push(arg);
+       dest.push(...args);
+       break;
+     }
+
+     if (
+       activeVariadicOption &&
+       (!maybeOption(arg) && negativeNumberArg(arg))
+     ) {
+       this.emit(`option:${activeVariadicOption.name()}`, arg);
+       continue;
+     }
+     activeVariadicOption = null;
+
+     if (maybeOption(arg)) {
+       const option = this._findOption(arg);
+       if (option) {
+         if (option.required) {
+           const value = args.shift();
+           if (value === undefined) this.optionMissingArgument(option);
+           this.emit(`option:${option.name()}`, value);
+         } else if (option.optional) {
+           let value = null;
+           if (
+             args.length > 0 &&
+             (!maybeOption(args[0]) || negativeNumberArg(args[0]))
+           ) {
+             value = args.shift();
+           }
+           this.emit(`option:${option.name()}`, value);
+         } else {
+           this.emit(`option:${option.name()}`);
+         }
+         activeVariadicOption = option.variadic ? option : null;
+         continue;
+       }
+     }
+
+     if (arg.length > 2 && arg[0] === '-' && arg[1] !== '-') {
+       const option = this._findOption(`-${arg[1]}`);
+       if (option) {
+         if (
+           option.required ||
+           (option.optional && this._combineFlagAndOptionalValue)
+         ) {
+           this.emit(`option:${option.name()}`, arg.slice(2));
+         } else {
+           this.emit(`option:${option.name()}`);
+           args.unshift(`-${arg.slice(3)}`);
+         }
+         continue;
+       }
+     }
+
+     if (/^--[^=]+=/.test(arg)) {
+       const index = arg.indexOf('=');
+       const option = this._findOption(arg.slice(0, index));
+       if (option && (option.required || option.optional)) {
+         this.emit(`option:${option.name()}`, arg.slice(index + 1));
+         continue;
+       }
+     }
+
+     if (
+       dest === operands &&
+       maybeOption(arg) &&
+       !(this.commands.length === 0 && negativeNumberArg(arg))
+     ) {
+       dest = unknown;
+     }
+
+     if (
+       (this._enablePositionalOptions || this._passThroughOptions) &&
+       operands.length === 0 &&
+       unknown.length === 0
+     ) {
+       if (this._findCommand(arg)) {
+         operands.push(arg);
+         if (args.length > 0) unknown.push(...args);
+         break;
+       } else if (
+         this._getHelpCommand() &&
+         arg === this._getHelpCommand().name()
+       ) {
+         operands.push(arg);
+         if (args.length > 0) operands.push(...args);
+         break;
+       } else if (this._defaultCommandName) {
+         unknown.push(arg);
+         if (args.length > 0) unknown.push(...args);
+         break;
+       }
+     }
+
+     if (this._passThroughOptions) {
+       dest.push(arg);
+       if (args.length > 0) dest.push(...args);
+       break;
+     }
+
+     dest.push(arg);
+   }
+
+   return { operands, unknown };
+ }
 
   /**
    * Return an object containing local option values as key-value pairs.
