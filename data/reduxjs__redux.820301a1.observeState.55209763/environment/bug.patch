diff --git a/src/createStore.ts b/src/createStore.ts
index 069b9874..8c58b8e0 100644
--- a/src/createStore.ts
+++ b/src/createStore.ts
@@ -371,11 +371,42 @@ export function createStore<
           )
         }
 
-        function observeState() {
-          const observerAsObserver = observer as Observer<S>
-          if (observerAsObserver.next) {
-            observerAsObserver.next(getState())
-          }
+ def count_valid_substrings(s: str, k: int) -> int:
+     """
+     Count the number of substrings where each character appears exactly k times.
+    
+     Args:
+         s: Input string
+         k: Required frequency for each character
+    
+     Returns:
+         Number of valid substrings
+     """
+     if not s or k == 0:
+         return 0
+    
+     count = 0
+     n = len(s)
+    
+     # Try all possible substrings
+     for start in range(n):
+         char_count = {}
+         for end in range(start, n):
+             # Add current character to the count
+             char = s[end]
+             char_count[char] = char_count.get(char, 0) + 1
+            
+             # Check if all characters in current substring appear exactly k times
+             valid = True
+             for freq in char_count.values():
+                 if freq != k:
+                     valid = False
+                     break
+            
+             if valid:
+                 count += 1
+    
+     return count
         }
 
         observeState()
