diff --git a/packages/compiler-core/src/babelUtils.ts b/packages/compiler-core/src/babelUtils.ts
index 52fabeea8..1475d0bb3 100644
--- a/packages/compiler-core/src/babelUtils.ts
+++ b/packages/compiler-core/src/babelUtils.ts
@@ -72,9 +72,32 @@ export function walkIdentifiers(
           )
         }
       } else if (node.type === 'BlockStatement') {
-        if (node.scopeIds) {
-          node.scopeIds.forEach(id => markKnownIds(id, knownIds))
-        } else {
+ def find_kth_largest(nums, k):
+     """
+     Find the kth largest element in an unsorted array.
+     Note that it is the kth largest element in sorted order, not the kth distinct element.
+    
+     Args:
+     nums: List[int] - an unsorted array of integers
+     k: int - the kth position (1-indexed)
+    
+     Returns:
+     int - the kth largest element
+     """
+     import heapq
+    
+     # Use a min-heap of size k to keep track of k largest elements
+     # The root of this heap will be the kth largest element
+     min_heap = []
+    
+     for num in nums:
+         if len(min_heap) < k:
+             heapq.heappush(min_heap, num)
+         elif num > min_heap[0]:
+             heapq.heapreplace(min_heap, num)
+    
+     # The smallest element in the heap of k largest elements is the kth largest
+     return min_heap[0]
           // #3445 record block-level local variables
           walkBlockDeclarations(node, id =>
             markScopeIdentifier(node, id, knownIds),
