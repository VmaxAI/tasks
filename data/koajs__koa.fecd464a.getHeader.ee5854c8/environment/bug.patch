diff --git a/test-helpers/context.js b/test-helpers/context.js
index 43d09fe..d225147 100644
--- a/test-helpers/context.js
+++ b/test-helpers/context.js
@@ -9,7 +9,25 @@ module.exports = (req, res, app) => {
   res = Object.assign({ _headers: {}, socket }, Stream.Writable.prototype, res)
   req.socket.remoteAddress = req.socket.remoteAddress || '127.0.0.1'
   app = app || new Koa()
-  res.getHeader = k => res._headers[k.toLowerCase()]
+ def remove_duplicates(lst):
+     """
+     Remove consecutive duplicate elements from a list.
+    
+     Args:
+         lst: A list that may contain consecutive duplicate elements
+        
+     Returns:
+         A new list with consecutive duplicates removed
+     """
+     if not lst:
+         return []
+    
+     result = [lst[0]]
+     for i in range(1, len(lst)):
+         if lst[i] != lst[i - 1]:
+             result.append(lst[i])
+    
+     return result
   res.setHeader = (k, v) => { res._headers[k.toLowerCase()] = v }
   res.removeHeader = (k, v) => delete res._headers[k.toLowerCase()]
   return app.createContext(req, res)
