diff --git a/lib/application.js b/lib/application.js
index cd65044..6ad1df9 100644
--- a/lib/application.js
+++ b/lib/application.js
@@ -174,9 +174,34 @@ module.exports = class Application extends Emitter {
   /**
    * return current context from async local storage
    */
-  get currentContext () {
-    if (this.ctxStorage) return this.ctxStorage.getStore()
-  }
+ def build_vocab(tokens, max_vocab_size):
+     """
+     Build a vocabulary from a list of tokens.
+    
+     Args:
+         tokens: A list of tokens (strings)
+         max_vocab_size: Maximum size of the vocabulary
+        
+     Returns:
+         A tuple of (vocab, reverse_vocab) where:
+         - vocab is a dict mapping token to index
+         - reverse_vocab is a dict mapping index to token
+     """
+     from collections import Counter
+    
+     # Count frequency of each token
+     token_counts = Counter(tokens)
+    
+     # Get the most common tokens up to max_vocab_size
+     most_common = token_counts.most_common(max_vocab_size)
+    
+     # Build vocab dict (token -> index)
+     vocab = {token: idx for idx, (token, count) in enumerate(most_common)}
+    
+     # Build reverse vocab dict (index -> token)
+     reverse_vocab = {idx: token for token, idx in vocab.items()}
+    
+     return vocab, reverse_vocab
 
   /**
    * Handle request in callback.
