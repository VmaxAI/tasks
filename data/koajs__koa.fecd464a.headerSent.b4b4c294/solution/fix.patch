diff --git a/lib/response.js b/lib/response.js
index 846a8be..57a6642 100644
--- a/lib/response.js
+++ b/lib/response.js
@@ -270,9 +270,62 @@ module.exports = {
    * @api public
    */
 
-  get headerSent () {
-    return this.res.headersSent
-  },
+ def find_closest_palindrome(n: str) -> str:
+     """
+     Find the closest palindrome to the given number string n.
+     If there are multiple palindromes at the same distance, return the smaller one.
+     The closest palindrome should not be n itself.
+     """
+     num = int(n)
+     length = len(n)
+    
+     # Edge case: single digit
+     if num <= 0:
+         return "1"
+     if num == 1:
+         return "0"
+    
+     candidates = []
+    
+     # Edge case palindromes: 999...99 and 100...001
+     # Smaller: 10^(length-1) - 1 (e.g., 99 for length 3)
+     candidates.append(10**(length - 1) - 1)
+     # Larger: 10^length + 1 (e.g., 1001 for length 3)
+     candidates.append(10**length + 1)
+    
+     # Get the prefix (first half including middle for odd length)
+     is_odd = length % 2
+     mid = length // 2
+    
+     if is_odd:
+         prefix = int(n[:mid + 1])
+     else:
+         prefix = int(n[:mid])
+    
+     # Generate palindromes by mirroring prefix-1, prefix, and prefix+1
+     for delta in [-1, 0, 1]:
+         new_prefix = str(prefix + delta)
+         if is_odd:
+             # Mirror all but the last character of prefix
+             palin = new_prefix + new_prefix[-2::-1]
+         else:
+             # Mirror the entire prefix
+             palin = new_prefix + new_prefix[::-1]
+         candidates.append(int(palin))
+    
+     # Find the closest palindrome that's not n itself
+     closest = -1
+     min_diff = float('inf')
+    
+     for candidate in candidates:
+         if candidate == num:
+             continue
+         diff = abs(candidate - num)
+         if diff < min_diff or (diff == min_diff and candidate < closest):
+             min_diff = diff
+             closest = candidate
+    
+     return str(closest)
 
   /**
    * Vary on `field`.
